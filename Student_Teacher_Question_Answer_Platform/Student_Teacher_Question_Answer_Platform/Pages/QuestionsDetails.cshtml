@page
@model Student_Teacher_Question_Answer_Platform.Pages.QuestionsDetailsModel
@{
    ViewData["Title"] = "Question Details";
}

<h1>@Model.StudentQuestion.Title</h1>
<p>@Model.StudentQuestion.Content</p>
<p>Asked by: @Model.StudentQuestion.UserName</p>
<p>Votes: @Model.StudentQuestion.VoteCount</p>

<form method="post" asp-page-handler="VoteQuestion">
    <input type="hidden" name="questionId" value="@Model.StudentQuestion.Id" />
    <button type="submit" name="isUpvote" value="true">Upvote</button>
    <button type="submit" name="isUpvote" value="false">Downvote</button>
</form>

<h2>Answers (@Model.AnswersCount)</h2>

@foreach (var answer in Model.Answers)
{
    <div class="card mb-3">
        <div class="card-body">
            <p>@answer.Content</p>
            <p>Answered by: @answer.UserName</p>
            <p>Votes: @answer.VoteCount</p>

            <form method="post" asp-page-handler="VoteAnswer">
                <input type="hidden" name="answerId" value="@answer.Id" />
                <button type="submit" name="isUpvote" value="true">Upvote</button>
                <button type="submit" name="isUpvote" value="false">Downvote</button>
            </form>
        </div>
    </div>
}
<a asp-page="/Answer" asp-route-questionId="@Model.StudentQuestion.Id" class="btn btn-primary">Submit an Answer</a>
